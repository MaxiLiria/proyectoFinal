
<div *ngIf="!submittedDetails" >
    <div>
        <h2>{{ alojamiento!.name }} </h2>
        <h2>{{ alojamiento!.type }} in {{ alojamiento!.city}} </h2>
        <div>{{ alojamiento!.level }} estrellas</div>
    </div>

    <h2>Los datos de tu próxima reserva </h2>
    <div>
        <p>Entrada</p>
        <div>{{ startSearched }}</div>

        <p>Salida</p>
        <div>{{ endSearched }}</div>
    </div>

    <div>
        <p>Duración total de la estancia</p>
        <div> {{ nightsSearched }} noches </div>
        <div> ({{ peopleSearched }} personas) </div>

        <p>Tu seleccion de habitación</p>
        <div> {{ room.name }} </div>
        <ul>
            <li *ngFor="let feature of room.features"> 
                {{ feature }}
            </li>
        </ul>
        <div *ngFor="let image of room.images">
            <img src="{{ image }}" alt="{{ room.name }}" />
        </div>
        <h3>Alojamiento en {{ citySearched }} </h3>
    </div>
</div>

<div>
    <h3>Desglose del precio</h3>
    <div>
        <h3>Total</h3>
        <div>
            <p>€ {{room.price! * nightsSearched}}</p>
            <p>Incluye impuestos y cargos</p>            
        </div>
    </div>
</div>


<div >
    <form class="b-form" *ngIf="!submittedDetails" [formGroup]="bookingForm" (ngSubmit)="clickIrAPagar()" >
        <h2>Introduce tus datos</h2>
        <input placeholder="Nombre" formControlName="name" type="text"/>
        <input placeholder="Apellido" formControlName="lastname" type="text"/>
        <input placeholder="Email" formControlName="email" type="email"/>
        <h2>Peticiones especiales</h2>
        <textarea placeholder="Me gustaria una habitacion en un piso alto" formControlName="peticiones" type="textarea"></textarea>
        <button>Ir al pago</button>
    </form>

    
</div>

<div *ngIf="submittedDetails && !isPaid">
    <h3>Nueva Tarjeta</h3>
    <form class="b-form" [formGroup]="payForm" (ngSubmit)="clickPagar()" >
        <label></label>
        <input formControlName="name" type="text"/>
        <p *ngIf="(submittedPayForm && payForm?.get('name')?.hasError('required'))">Este campo es requerido</p>
        <input formControlName="lastname" type="text"/>
        <p *ngIf="(submittedPayForm && payForm?.get('lastname')?.hasError('required'))">Este campo es requerido</p>
        <input placeholder="Num Tarjeta" formControlName="numeroTarjeta" type="text"/>
        <p *ngIf="(submittedPayForm && payForm?.get('numeroTarjeta')?.hasError('required'))">Este campo es requerido</p>
        <p *ngIf="(submittedPayForm && payForm?.get('numeroTarjeta')?.hasError('pattern'))">Insertar formato 4XXX XXXX XXXX XXXX</p>
        <input placeholder="DD / MM" formControlName="FechaCaducidad" type="text"/>
        <p *ngIf="(submittedPayForm && payForm?.get('FechaCaducidad')?.hasError('required'))">Este campo es requerido</p>
        <p *ngIf="(submittedPayForm && payForm?.get('FechaCaducidad')?.hasError('pattern'))">Insertar formato MM/YY o MMYY</p>
        <input placeholder="CVC" formControlName="CVC" type="text"/>
        <p *ngIf="(submittedPayForm && payForm?.get('CVC')?.hasError('pattern'))">Insertar numero de 3 o 4 cifras</p>
        <p *ngIf="(submittedPayForm && payForm?.get('CVC')?.hasError('required'))">Este campo es requerido</p>

        <button>Completar la reserva</button>
    </form> 

</div>


<div *ngIf="isPaid">
    <app-confirmation></app-confirmation>
</div> 

